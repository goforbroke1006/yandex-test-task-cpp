# python check_mem_usage.py 

import os

def memory():
    import os
    from wmi import WMI
    w = WMI('.')
    result = w.query("SELECT WorkingSet FROM Win32_PerfRawData_PerfProc_Process WHERE IDProcess=%d" % os.getpid())
    return int(result[0].WorkingSet)

_proc_status = '/proc/%d/status' % os.getpid()

_scale = {'kB': 1024.0, 'mB': 1024.0*1024.0,
          'KB': 1024.0, 'MB': 1024.0*1024.0}

def _VmB(VmKey):
    '''Private.
    '''
    global _proc_status, _scale
     # get pseudo file  /proc/<pid>/status
    try:
        t = open(_proc_status)
        v = t.read()
        t.close()
    except:
        return 0.0  # non-Linux?
     # get VmKey line e.g. 'VmRSS:  9999  kB\n ...'
    i = v.index(VmKey)
    v = v[i:].split(None, 3)  # whitespace
    if len(v) < 3:
        return 0.0  # invalid format?
     # convert Vm value to bytes
    return float(v[1]) * _scale[v[2]]


def memory(since=0.0):
    '''Return memory usage in bytes.
    '''
    return _VmB('VmSize:') - since


def resident(since=0.0):
    '''Return resident memory usage in bytes.
    '''
    return _VmB('VmRSS:') - since


def stacksize(since=0.0):
    '''Return stack size in bytes.
    '''
    return _VmB('VmStk:') - since

#bigVar = 192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239192679423478364782632778462367427364328964273642736432648236487263478236478236482736478236478236478239803982038672390843908543567902584239

print (memory()/1024.0/1024.0)

#tot_m, used_m, free_m = map(int, os.popen('free -t -m').readlines()[-1].split()[1:])
#print 'Total Memory = ', tot_m, ' MB'
#print 'Used Memory = ', used_m, ' MB'
#print 'Free Memory = ', free_m, ' MB'
